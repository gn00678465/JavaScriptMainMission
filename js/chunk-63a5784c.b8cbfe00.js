(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63a5784c"],{5592:function(t,e,a){"use strict";e["a"]={methods:{successNotify:function(t){this.$toast.success(t)},errorNotify:function(t){this.$toast.error(t)},dialogNotify:function(){}}}},"99af":function(t,e,a){"use strict";var s=a("23e7"),o=a("d039"),i=a("e8b5"),n=a("861d"),r=a("7b0b"),c=a("50c4"),u=a("8418"),d=a("65f0"),l=a("1dde"),p=a("b622"),f=a("2d00"),h=p("isConcatSpreadable"),m=9007199254740991,g="Maximum allowed index exceeded",v=f>=51||!o((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=l("concat"),y=function(t){if(!n(t))return!1;var e=t[h];return void 0!==e?!!e:i(t)},w=!v||!b;s({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,s,o,i,n=r(this),l=d(n,0),p=0;for(e=-1,s=arguments.length;e<s;e++)if(i=-1===e?n:arguments[e],y(i)){if(o=c(i.length),p+o>m)throw TypeError(g);for(a=0;a<o;a++,p++)a in i&&u(l,p,i[a])}else{if(p>=m)throw TypeError(g);u(l,p++,i)}return l.length=p,l}})},a492:function(t,e,a){"use strict";var s=a("afef"),o=a.n(s);o.a},afef:function(t,e,a){},b019:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vld-parent"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!0},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"form"},[a("div",{staticClass:"form-toggle"}),a("div",{staticClass:"form-panel one"},[t._m(0),a("div",{staticClass:"form-content"},[a("LoginForm",{on:{submit:t.login}})],1)])])],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-header"},[a("p",{staticClass:"title"},[t._v("後台系統登入")])])}],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationObserver",{attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("validation-provider",{staticClass:"form-group",attrs:{tag:"div",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{attrs:{for:"loginemail"}},[t._v("mail")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],class:o,attrs:{type:"email",id:"loginemail",name:"useremail",placeholder:"請輸入信箱地址"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("span",{staticClass:"error"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("validation-provider",{staticClass:"form-group",attrs:{tag:"div",rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,o=e.classes;return[a("label",{attrs:{for:"loginpasswd"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],class:o,attrs:{type:"password",id:"loginpasswd",name:"password",placeholder:"請輸入密碼"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("span",{staticClass:"error"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"form-group"},[a("label",{staticClass:"form-remember"},[a("input",{attrs:{type:"checkbox"}}),t._v("Remember Me ")]),a("a",{staticClass:"form-recovery",attrs:{href:"#"}},[t._v("Forgot Password?")])]),a("div",{staticClass:"form-group"},[a("button",{attrs:{type:"submit",disabled:s}},[t._v("登入")])])]}}])})},n=[],r={name:"LoginForm",data:function(){return{user:{email:"",password:""}}},methods:{submit:function(){this.$emit("submit",this.user)}}},c=r,u=a("2877"),d=Object(u["a"])(c,i,n,!1,null,"3ee2be18",null),l=d.exports,p=a("ccaa"),f=a("5592"),h={name:"Login",components:{LoginForm:l},mixins:[p["a"],f["a"]],data:function(){return{err:{}}},methods:{}},m=h,g=(a("a492"),Object(u["a"])(m,s,o,!1,null,"7d9bc8ea",null));e["default"]=g.exports},ccaa:function(t,e,a){"use strict";a("99af"),a("ac1f"),a("5319");e["a"]={data:function(){return{isLoading:!1}},methods:{login:function(t){var e=this;this.isLoading=!0,this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/login"),t).then((function(t){200===t.status&&(e.redirection(t.data),e.successNotify(t.data.message),e.$router.replace("/admin"),e.isLoading=!1)})).catch((function(t){e.errorNotify(t.response.data.message),e.isLoading=!1}))},SignOut:function(t){var e=this;this.isLoading=!0,this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/logout"),{api_token:t}).then((function(t){200===t.status&&(e.successNotify(t.data.message),e.$router.replace("/login"),e.isLoading=!1)})).catch((function(t){e.errorNotify(t.response.data.message),e.isLoading=!1}))},redirection:function(t){var e=t.token,a=t.expired,s=new Date(1e3*a);document.cookie="HEXtoken=".concat(e,";path=/;expires=").concat(s)},getToken:function(){return document.cookie.replace(/(?:(?:^|.*;\s*)HEXtoken\s*=\s*([^;]*).*$)|^.*$/,"$1")},checkStatus:function(){var t=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/check"),{api_token:this.token}).then((function(e){200===e.status&&(t.$http.defaults.headers.common.Authorization="Bearer ".concat(t.getToken()))})).catch((function(e){t.$router.replace("/login"),t.errorNotify(e.response.data.message)}))},getProductList:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/products")).then((function(e){200===e.status&&(t.products=e.data.data,t.isLoading=!1)})).catch((function(e){t.isLoading=!1,t.errorNotify(e.response.data.message)}))},UploadFile:function(t){var e=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/storage"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200===t.status&&(e.isUplading=!1,e.inputTemp.imageUrl.push(t.data.data.path))})).catch((function(t){e.isUplading=!1,e.errorNotify(t.response.data.message)}))},CreateProd:function(t){var e=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product"),t).then((function(t){200===t.status&&(e.getProductList(),e.successNotify("商品新增成功"))})).catch((function(t){e.errorNotify(t.response.data.message)}))},UpdateProd:function(t){var e=this;this.$http.patch("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t.id),t).then((function(a){200===a.status&&(e.getProductList(),e.successNotify("".concat(t.title," 編輯成功")))})).catch((function(t){e.errorNotify(t.response.data.message)}))},destroyProduct:function(t){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t)).then((function(t){200===t.status&&e.getProductList()})).catch((function(t){e.errorNotify(t.response.data.message)}))}}}}}]);
//# sourceMappingURL=chunk-63a5784c.b8cbfe00.js.map