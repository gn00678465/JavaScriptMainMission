(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d44c108"],{"072f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{"btn-group":t.isGroup}},t._l(t.btns,(function(e,a){return n("button",{key:a,staticClass:"btn",class:"btn"+(e.outline?"-outline":"")+"-"+e.class,attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),t.$emit("emitHandler",e.action)}}},[""===e.content&&""!==e.icon?n("font-awesome-icon",{attrs:{icon:["fas",e.icon]}}):n("span",[t._v(t._s(e.content))])],1)})),0)},r=[],o={name:"BtnGroup",props:{splite:{type:Boolean,default:!1},btns:{type:Array}},data:function(){return{}},methods:{},computed:{btnLength:function(){return this.btns.length},isGroup:function(){return this.btnLength>1}}},i=o,s=(n("6a9e"),n("2877")),c=Object(s["a"])(i,a,r,!1,null,"f9fd9868",null);e["a"]=c.exports},1799:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-fluid"},[n("ul",{staticClass:"page"},[n("li",{staticClass:"page__item",class:{disabled:1===t.current},on:{click:function(e){return e.preventDefault(),t.pageHandler(-1)}}},[n("a",{staticClass:"page__link",attrs:{href:"#"}})]),t._l(t.total_pages,(function(e){return n("li",{key:e,staticClass:"page__item",class:{active:e===t.current},on:{click:function(e){return e.preventDefault(),t.clickHandler(e)}}},[n("a",{staticClass:"page__link",attrs:{href:"#","data-page":e}},[t._v(t._s(e))])])})),n("li",{staticClass:"page__item",class:{disabled:t.current===t.total_pages},on:{click:function(e){return e.preventDefault(),t.pageHandler(1)}}},[n("a",{staticClass:"page__link",attrs:{href:"#"}})])],2)])},r=[],o=(n("a9e3"),{name:"Pagination",props:{page:{type:Number,required:!0},total_pages:{type:Number,required:!0}},data:function(){return{current:this.page}},methods:{pageHandler:function(t){this.current+=t,0===this.current?this.current=1:this.current>this.total_pages&&(this.current=this.total_pages)},clickHandler:function(t){t.target.dataset.page!==this.current&&(this.current=1*t.target.dataset.page)}},watch:{current:function(){this.$emit("update:page",this.current)}}}),i=o,s=(n("188b"),n("2877")),c=Object(s["a"])(i,a,r,!1,null,"3ec3540b",null);e["a"]=c.exports},"188b":function(t,e,n){"use strict";var a=n("abc1"),r=n.n(a);r.a},"1fae":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container lists"},[n("p",{staticClass:"h1"},[t._v("產品列表管理系統"),n("BtnGroup",{staticClass:"float-right",attrs:{btns:t.btn},on:{emitHandler:t.createHandler}})],1),n("div",{staticClass:"vld-parent"},[n("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),n("table",{staticClass:"table"},[n("thead",[n("tr",[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),n("th",[n("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","cog"]}})],1)])]),n("tbody",t._l(t.newProducts,(function(e){return n("DashboardProductsItem",{key:e.id,tag:"tr",attrs:{prodItem:e},on:{click:t.emitHandler}})})),1)])],1),n("Pagination",{attrs:{total_pages:t.total_page,page:t.page},on:{"update:page":function(e){t.page=e}}}),n("Modal",{ref:"modal",on:{update:t.prodHandler}})],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",{staticClass:"th"},[t._v("分類")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",{staticClass:"th"},[t._v("產品名稱")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",{staticClass:"th"},[t._v("原價")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",{staticClass:"th"},[t._v("售價")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("th",[n("span",{staticClass:"th"},[t._v("是否啟用")])])}],o=(n("99af"),n("4160"),n("d3b7"),n("159b"),n("5530")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",[t._v(t._s(t.prodItem.category))]),n("td",[t._v(t._s(t.prodItem.title))]),n("td",[t._v(t._s(t._f("Dollar")(t._f("Currency")(t.prodItem.origin_price))))]),n("td",[t._v(t._s(t._f("Dollar")(t._f("Currency")(t.prodItem.price))))]),n("td",[n("toggler",{attrs:{prodId:t.prodItem.id.substr(0,5),disabled:!0,checked:t.prodItem.enabled}})],1),n("td",[n("BtnGroup",{attrs:{btns:t.btns},on:{emitHandler:t.emitHandler}})],1)])},s=[],c=n("8163"),u=n("072f"),d={name:"DashboardProductsItem",components:{toggler:c["a"],BtnGroup:u["a"]},props:{prodItem:{type:Object,required:!0}},data:function(){return{isLoading:!1,btns:[{class:"primary",outline:!0,content:"",icon:"edit",action:"edit",size:"xl"},{class:"error",outline:!1,content:"",icon:"trash-alt",action:"del",size:"xl"}]}},methods:{emitHandler:function(t){this.$emit("click",t,this.prodItem)}}},l=d,p=n("2877"),f=Object(p["a"])(l,i,s,!1,null,"23d19425",null),h=f.exports,g=n("1799"),m=n("ccaa"),b=n("5592"),_={name:"Products",components:{DashboardProductsItem:h,Pagination:g["a"],BtnGroup:u["a"],Modal:function(){return n.e("chunk-651e62eb").then(n.bind(null,"714b"))}},mixins:[m["a"],b["a"]],created:function(){this.getProductList()},data:function(){return{btn:[{class:"primary",outline:!1,content:"新增產品",icon:"",action:"new",size:"xl"}],products:[],page:1,total_page:null}},methods:{handleProducts:function(){var t=[];return this.products.forEach((function(e,n){n%10===0&&t.push([]);var a=parseInt(n/10,10);t[a].push(e)})),this.total_page=t.length,t},emitHandler:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=[].concat(e),r=a[0],o=a[1];this["".concat(r,"Handler")](o)},editHandler:function(t){this.$refs.modal.showModal=!0,this.$refs.modal.modalTitle="edit";var e=Object(o["a"])({},t);this.$refs.modal.inputTemp=e},delHandler:function(t){this.destroyProduct(t.id)},createHandler:function(){this.$refs.modal.showModal=!0,this.$refs.modal.modalTitle="create"},prodHandler:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=[].concat(e),r=a[0],o=a[1];this["".concat(r,"Prod")](o)},createProd:function(t){this.isLoading=!0,this.CreateProd(t)},editProd:function(t){this.isLoading=!0,this.UpdateProd(t)}},computed:{newProducts:function(){return this.handleProducts()[this.page-1]}}},v=_,y=(n("71d7"),Object(p["a"])(v,a,r,!1,null,"dbf7ea14",null));e["default"]=y.exports},"239d":function(t,e,n){"use strict";var a=n("eddf"),r=n.n(a);r.a},"4c3f":function(t,e,n){},5592:function(t,e,n){"use strict";e["a"]={methods:{successNotify:function(t){this.$toast.success(t)},errorNotify:function(t){this.$toast.error(t)},dialogNotify:function(){}}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var a=n("1d80"),r=n("5899"),o="["+r+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),c=function(t){return function(e){var n=String(a(e));return 1&t&&(n=n.replace(i,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},"6a9e":function(t,e,n){"use strict";var a=n("d6f5"),r=n.n(a);r.a},7156:function(t,e,n){var a=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var o,i;return r&&"function"==typeof(o=e.constructor)&&o!==n&&a(i=o.prototype)&&i!==n.prototype&&r(t,i),t}},"71d7":function(t,e,n){"use strict";var a=n("4c3f"),r=n.n(a);r.a},8163:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{attrs:{type:"checkbox",id:t.prodId,disabled:t.disabled},domProps:{checked:t.checked},on:{change:function(e){return t.change(e)}}}),n("label",{class:{disabled:t.disabled},attrs:{for:t.prodId}},[t._v("Toggle")])])},r=[],o={name:"ToggleSwitch",props:{prodId:{type:String,required:!0},checked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{}},methods:{change:function(t){this.$emit("input",t.target.checked)}}},i=o,s=(n("239d"),n("2877")),c=Object(s["a"])(i,a,r,!1,null,"30231760",null);e["a"]=c.exports},"99af":function(t,e,n){"use strict";var a=n("23e7"),r=n("d039"),o=n("e8b5"),i=n("861d"),s=n("7b0b"),c=n("50c4"),u=n("8418"),d=n("65f0"),l=n("1dde"),p=n("b622"),f=n("2d00"),h=p("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",b=f>=51||!r((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),_=l("concat"),v=function(t){if(!i(t))return!1;var e=t[h];return void 0!==e?!!e:o(t)},y=!b||!_;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,n,a,r,o,i=s(this),l=d(i,0),p=0;for(e=-1,a=arguments.length;e<a;e++)if(o=-1===e?i:arguments[e],v(o)){if(r=c(o.length),p+r>g)throw TypeError(m);for(n=0;n<r;n++,p++)n in o&&u(l,p,o[n])}else{if(p>=g)throw TypeError(m);u(l,p++,o)}return l.length=p,l}})},a9e3:function(t,e,n){"use strict";var a=n("83ab"),r=n("da84"),o=n("94ca"),i=n("6eeb"),s=n("5135"),c=n("c6b6"),u=n("7156"),d=n("c04e"),l=n("d039"),p=n("7c73"),f=n("241c").f,h=n("06cf").f,g=n("9bf2").f,m=n("58a8").trim,b="Number",_=r[b],v=_.prototype,y=c(p(v))==b,k=function(t){var e,n,a,r,o,i,s,c,u=d(t,!1);if("string"==typeof u&&u.length>2)if(u=m(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(o=u.slice(2),i=o.length,s=0;s<i;s++)if(c=o.charCodeAt(s),c<48||c>r)return NaN;return parseInt(o,a)}return+u};if(o(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var $,I=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof I&&(y?l((function(){v.valueOf.call(n)})):c(n)!=b)?u(new _(k(e)),n,I):k(e)},N=a?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;N.length>C;C++)s(_,$=N[C])&&!s(I,$)&&g(I,$,h(_,$));I.prototype=v,v.constructor=I,i(r,b,I)}},abc1:function(t,e,n){},ccaa:function(t,e,n){"use strict";n("99af"),n("ac1f"),n("5319");e["a"]={data:function(){return{isLoading:!1}},methods:{login:function(t){var e=this;this.isLoading=!0,this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/login"),t).then((function(t){200===t.status&&(e.redirection(t.data),e.successNotify(t.data.message),e.$router.replace("/admin"),e.isLoading=!1)})).catch((function(t){e.errorNotify(t.response.data.message),e.isLoading=!1}))},SignOut:function(t){var e=this;this.isLoading=!0,this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/logout"),{api_token:t}).then((function(t){200===t.status&&(e.successNotify(t.data.message),e.$router.replace("/login"),e.isLoading=!1)})).catch((function(t){e.errorNotify(t.response.data.message),e.isLoading=!1}))},redirection:function(t){var e=t.token,n=t.expired,a=new Date(1e3*n);document.cookie="HEXtoken=".concat(e,";path=/;expires=").concat(a)},getToken:function(){return document.cookie.replace(/(?:(?:^|.*;\s*)HEXtoken\s*=\s*([^;]*).*$)|^.*$/,"$1")},checkStatus:function(){var t=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/auth/check"),{api_token:this.token}).then((function(e){200===e.status&&(t.$http.defaults.headers.common.Authorization="Bearer ".concat(t.getToken()))})).catch((function(e){t.$router.replace("/login"),t.errorNotify(e.response.data.message)}))},getProductList:function(){var t=this;this.isLoading=!0,this.$http.get("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/products")).then((function(e){200===e.status&&(t.products=e.data.data,t.isLoading=!1)})).catch((function(e){t.isLoading=!1,t.errorNotify(e.response.data.message)}))},UploadFile:function(t){var e=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/storage"),t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){200===t.status&&(e.isUplading=!1,e.inputTemp.imageUrl.push(t.data.data.path))})).catch((function(t){e.isUplading=!1,e.errorNotify(t.response.data.message)}))},CreateProd:function(t){var e=this;this.$http.post("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product"),t).then((function(t){200===t.status&&(e.getProductList(),e.successNotify("商品新增成功"))})).catch((function(t){e.errorNotify(t.response.data.message)}))},UpdateProd:function(t){var e=this;this.$http.patch("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t.id),t).then((function(n){200===n.status&&(e.getProductList(),e.successNotify("".concat(t.title," 編輯成功")))})).catch((function(t){e.errorNotify(t.response.data.message)}))},destroyProduct:function(t){var e=this;this.isLoading=!0,this.$http.delete("".concat("https://course-ec-api.hexschool.io/","api/").concat("99034dfb-2d10-45b5-8844-dd3e163815eb","/admin/ec/product/").concat(t)).then((function(t){200===t.status&&e.getProductList()})).catch((function(t){e.errorNotify(t.response.data.message)}))}}}},d6f5:function(t,e,n){},eddf:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5d44c108.52111eef.js.map